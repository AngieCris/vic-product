
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Connections Fail with Certificate Errors when Using Full TLS Authentication with Trusted Certificates Â· VMware vSphere Integrated Containers Engine 0.8 for vSphere Administrators</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="feedback.html" />
    
    
    <link rel="prev" href="ts_delete_inspect_error.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="interop.html">
            
                <a href="interop.html">
            
                    
                    Interoperability with Other VMware Software
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="vch_admin.html">
            
                <a href="vch_admin.html">
            
                    
                    VCH Administration
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="vic_machine_version.html">
            
                <a href="vic_machine_version.html">
            
                    
                    Obtain vic-machine Version Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="common_vic_options.html">
            
                <a href="common_vic_options.html">
            
                    
                    Common vic-machine Options
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="list_vch.html">
            
                <a href="list_vch.html">
            
                    
                    List VCHs and Obtain Their IDs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="inspect_vch.html">
            
                <a href="inspect_vch.html">
            
                    
                    Obtain VCH Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="remove_vch.html">
            
                <a href="remove_vch.html">
            
                    
                    Delete a VCH
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="delete_vch_options.html">
            
                <a href="delete_vch_options.html">
            
                    
                    VCH Delete Options
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="vch_portlet_ui.html">
            
                <a href="vch_portlet_ui.html">
            
                    
                    Find VCH Information in the vSphere Web Client
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="container_portlet_ui.html">
            
                <a href="container_portlet_ui.html">
            
                    
                    Find Container Information in the vSphere Web Client
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="access_vicadmin.html">
            
                <a href="access_vicadmin.html">
            
                    
                    Access the VCH Admin Portal
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="browser_login.html">
            
                <a href="browser_login.html">
            
                    
                    Browser-Based Certificate Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="cmdline_login.html">
            
                <a href="cmdline_login.html">
            
                    
                    Command Line Certificate Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="vicadmin_status_ref.html">
            
                <a href="vicadmin_status_ref.html">
            
                    
                    VCH Admin Status Reference
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="troubleshoot_vic_admin.html">
            
                <a href="troubleshoot_vic_admin.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="log_bundles.html">
            
                <a href="log_bundles.html">
            
                    
                    Access Log Bundles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="debug_vch.html">
            
                <a href="debug_vch.html">
            
                    
                    Debugging the VCH
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.2.1" data-path="vch_shell_access.html">
            
                <a href="vch_shell_access.html">
            
                    
                    Enable Shell Access to the VCH Endpoint VM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.2" data-path="vch_ssh_access.html">
            
                <a href="vch_ssh_access.html">
            
                    
                    Authorize SSH Access to the VCH Endpoint VM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.3" data-path="debug_vch_options.html">
            
                <a href="debug_vch_options.html">
            
                    
                    VCH Debug Options
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="ts_delete_inspect_error.html">
            
                <a href="ts_delete_inspect_error.html">
            
                    
                    Deleting or Inspecting a VCH Fails with an Error
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.7.4" data-path="ts_clock_skew.html">
            
                <a href="ts_clock_skew.html">
            
                    
                    Connections Fail with Certificate Errors when Using Full TLS Authentication with Trusted Certificates
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="feedback.html">
            
                <a href="feedback.html">
            
                    
                    Send Documentation Feedback
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Connections Fail with Certificate Errors when Using Full TLS Authentication with Trusted Certificates</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="connections-fail-with-certificate-errors-when-using-full-tls-authentication-with-trusted-certificates">Connections Fail with Certificate Errors when Using Full TLS Authentication with Trusted Certificates</h1>
<p>Connections to a virtual container host (VCH) that uses full TLS authentication with trusted Certificate Authority (CA) certificates fail with certificate errors.</p>
<h2 id="problem">Problem</h2>
<ul>
<li><code>vic-machine</code> operations on a VCH result in a &quot;bad certificate&quot; error:
<pre>Connection failed with TLS error &quot;bad certificate&quot; 
check for clock skew on the host
Collecting host-227 hostd.log
vic-machine-windows.exe failed: tls: bad certificate
</pre>
<strong>NOTE</strong>: <code>vic-machine</code> tolerates a 1 day skew. A skew of 1 day might result in a different certificate error than time skew.</li>
<li>Connections to the VCH Admin portal for the VCH fail with an <code>ERR_CERT_DATE_INVALID</code> error.</li>
<li>Connections to the VCH from Docker clients fail with a <code>bad certificate</code> error.</li>
</ul>
<h2 id="cause">Cause</h2>
<p>There is potentially a clock skew between the VCH and the system from which you are connecting to the VCH.</p>
<h2 id="solution">Solution</h2>
<ol>
<li>Go to the VCH Admin portal for the VCH at https://<i>vch_address</i>:2378 and check the System Time under <strong>VCH Info</strong>.</li>
<li><p>If the system time of the VCH is wrong, run <code>vic-machine debug</code> to enable SSH access to the VCH. </p>
<p>For information about enabling SSH on a VCH, see <a href="vch_ssh_access.html">Authorize SSH Access to the VCH Endpoint VM</a>.</p>
</li>
<li>Connect to the VCH endpoit VM by using SSH.</li>
<li><p>Use the <code>date --set</code> Linux command to set the system clock to the correct date and time.</p>
<p>The two most common date formats are the following:</p>
<ul>
<li>Unix Time Stamp: <code>date --set=&apos;@1480969133&apos;</code></li>
<li><code>YYYYMMDD HH:MM</code> format: <code>date --set=&quot;20161205 14:31&quot;</code>  </li>
</ul>
</li>
</ol>
<p>To prevent this issue recurring on VCHs that you deploy in the future, verify that the host time is correct on the ESXi host on which you deploy VCHs. For information about verifying time synchronization on ESXi hosts, see <a href="https://kb.vmware.com/kb/1003736" target="_blank">VMware KB 1003736</a>.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="ts_delete_inspect_error.html" class="navigation navigation-prev " aria-label="Previous page: Deleting or Inspecting a VCH Fails with an Error">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="feedback.html" class="navigation navigation-next " aria-label="Next page: Send Documentation Feedback">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Connections Fail with Certificate Errors when Using Full TLS Authentication with Trusted Certificates","level":"1.7.4","depth":2,"next":{"title":"Send Documentation Feedback","level":"1.8","depth":1,"path":"feedback.md","ref":"feedback.md","articles":[]},"previous":{"title":"Deleting or Inspecting a VCH Fails with an Error","level":"1.7.3","depth":2,"path":"ts_delete_inspect_error.md","ref":"ts_delete_inspect_error.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageBreaksBefore":"/","headerTemplate":"_TITLE_","paperSize":"a4","margin":{"right":62,"left":62,"top":56,"bottom":56},"fontSize":12,"fontFamily":"Arial","footerTemplate":"_PAGENUM_","chapterMark":"pagebreak","pageNumbers":true},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"VMware vSphere Integrated Containers Engine 0.8 for vSphere Administrators","gitbook":"*"},"file":{"path":"ts_clock_skew.md","mtime":"2017-02-21T09:25:38.535Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-02-23T14:00:37.747Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

